<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Walimatulurus Thaqif & Farhani</title>

  <!-- Bootstrap + Tailwind -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Pinyon+Script&family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      scroll-behavior: smooth;
    }

    /* Hero Section */
    .hero {
      background: url('img/Bg.png') center center / cover no-repeat;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      text-align: center;
      text-shadow: 1px 1px 8px rgba(0,0,0,0.7);
      position: relative;
    }

    .hero::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.55), rgba(0,0,0,0.15));
      z-index: 1;
    }

    .hero .content {
      position: relative;
      z-index: 2;
      opacity: 0;
      transform: translateY(40px);
      animation: fadeUp 1.5s ease forwards;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .font-pinyon {
      font-family: 'Pinyon Script', cursive;
      font-size: 4.5rem;
      font-weight: 400;
    }

    /* Transparent button */
    .btn-transparent {
      background: transparent;
      color: white;
      border: 2px solid white;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    .btn-transparent:hover {
      background-color: rgba(255, 255, 255, 0.2);
      color: #fff;
      transform: scale(1.05);
    }

    .overlay {
      background-color: rgba(255, 255, 255, 0.9);
      border-radius: 1.5rem;
    }

    .music-control {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: white;
      border-radius: 9999px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      padding: 8px 14px;
      gap: 8px;
      z-index: 1000;
    }
  </style>
</head>

<body class="text-gray-800">

  <!-- üéµ Hidden Audio -->
  <audio id="bgMusic" loop>
    <source src="img/Bg.mp3" type="audio/mpeg">
  </audio>

  <!-- üéµ Floating Music Control -->
  <div class="music-control">
    <button id="musicToggle" class="btn btn-sm btn-outline-danger">üîä Pause</button>
  </div>

  <!-- üå∏ HERO PAGE -->
  <section class="hero">
    <div class="content">
      <h2 class="text-2xl sm:text-3xl uppercase tracking-widest font-medium">Walimatulurus</h2>
      <h1 class="font-pinyon mt-3">Farhani & Thaqif</h1>
      <p class="mt-2 text-lg">2 Mei 2026</p>
      <p class="text-sm mt-1 tracking-widest">#HANInoesQEP</p>

      <button onclick="startMusicAndScroll()" class="btn btn-transparent mt-5 px-5 py-2 rounded-full shadow-md">
        üíå Lihat Jemputan
      </button>
    </div>
  </section>

  <!-- üåπ MAIN CARD -->
  <div id="main-card" class="max-w-3xl mx-auto p-6 overlay mt-10 mb-10">

    <div class="text-center mb-6">
      <h1 class="text-4xl font-pinyon text-pink-600">Thaqif & Farhani</h1>
      <p class="mt-2">Walimatulurus ‚Ä¢ Sabtu, 2 Mei 2026</p>
    </div>

    <div class="bg-white rounded-3xl p-4 shadow mb-4 text-center">
      <p class="text-gray-600 italic">
        ‚ÄúDengan penuh kesyukuran, kami menjemput anda ke majlis walimatulurus kami.‚Äù
      </p>
    </div>

    <!-- Butiran Majlis -->
    <div class="bg-white rounded-3xl p-4 shadow mb-4">
      <h2 class="text-xl font-semibold mb-3">Butiran Majlis</h2>
      <ul class="list-unstyled text-sm">
        <li><strong>Tarikh:</strong> Sabtu, 2 Mei 2026</li>
        <li><strong>Masa:</strong> 12:00 tengah hari ‚Äì 4:00 petang</li>
        <li><strong>Tempat:</strong> Dewan Seri Perdana, Putrajaya</li>
      </ul>
      <div class="mt-3 d-flex justify-content-center gap-2">
        <a href="https://www.google.com/maps/place/Dewan+Seri+Perdana,+Putrajaya"
           target="_blank" class="btn btn-outline-primary">Google Maps</a>
        <a href="https://waze.com/ul?ll=2.9266,101.6951&navigate=yes"
           target="_blank" class="btn btn-outline-secondary">Waze</a>
      </div>
    </div>

    <!-- üå∏ RSVP + UCAPAN FORM -->
    <div class="bg-white rounded-3xl p-4 shadow mb-4">
      <h2 class="text-xl font-semibold mb-3">RSVP & Ucapan</h2>

      <form id="rsvpForm" class="space-y-3">
        <div>
          <label class="block text-sm font-medium">Nama <span class="text-red-500">*</span></label>
          <input type="text" id="nama" class="form-control" placeholder="Nama anda" required>
        </div>

        <div>
          <label class="block text-sm font-medium">Bilangan Kehadiran <span class="text-red-500">*</span></label>
          <select id="bilangan" class="form-select" required>
            <option value="">Pilih bilangan...</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium">Ucapan</label>
          <textarea id="ucapan" class="form-control" rows="3" placeholder="Tulis ucapan anda..."></textarea>
        </div>

        <button type="submit" class="btn btn-outline-primary w-full">Hantar</button>
      </form>

      <div id="msg" class="text-center mt-3 text-success font-medium hidden">
        ‚úÖ Terima kasih! Ucapan anda telah dihantar.
      </div>
    </div>

    <!-- üå∏ Paparan Ucapan -->
    <div class="bg-white rounded-3xl p-4 shadow mb-4">
      <h2 class="text-xl font-semibold mb-3">Ucapan Daripada Tetamu</h2>
      <div id="ucapanList" class="space-y-3 text-sm text-gray-700">
        <p>Sedang memuatkan ucapan...</p>
      </div>
    </div>

    <!-- Salam Kaut -->
    <div class="bg-white rounded-3xl p-4 shadow mb-4 text-center">
      <h2 class="text-xl font-semibold mb-3">Salam Kaut & Hadiah</h2>
      <p class="text-sm mb-2">Maklumat untuk yang ingin memberikan sumbangan:</p>
      <p><strong>Bank Islam</strong><br>No Akaun: 123456789 (Thaqif)</p>

      <div class="mt-3">
        <img src="img/QRCodeThaqif.jpg" alt="QR DuitNow Thaqif" class="rounded shadow mx-auto w-40 h-40">
      </div>

      <a href="https://shopee.com.my" target="_blank" class="text-pink-600 underline block mt-3">
        Lihat Wishlist Kami
      </a>
    </div>

    <!-- Contact -->
    <div class="bg-white rounded-3xl p-4 shadow text-center">
      <p>Untuk pertanyaan lanjut:</p>
      <a href="https://wa.me/60123456789" class="btn btn-success mt-2">
        Hubungi Kami (WhatsApp)
      </a>
    </div>
  </div>

<script>
  // ===== üéµ MUSIC CONTROL =====
  const music = document.getElementById('bgMusic');
  const toggleBtn = document.getElementById('musicToggle');
  let isPlaying = false;

  window.addEventListener('load', () => {
    music.play().then(() => { isPlaying = true; }).catch(() => {});
  });

  function startMusicAndScroll() {
    if (!isPlaying) {
      music.play();
      isPlaying = true;
    }
    document.getElementById("main-card").scrollIntoView({ behavior: "smooth" });
  }

  toggleBtn.addEventListener('click', () => {
    if (isPlaying) {
      music.pause();
      toggleBtn.textContent = 'üîá Play';
    } else {
      music.play();
      toggleBtn.textContent = 'üîä Pause';
    }
    isPlaying = !isPlaying;
  });


  // ===== üìÑ GOOGLE SHEET FORM INTEGRATION =====
  const scriptURL = "https://script.google.com/macros/s/AKfycbzoYNntYpCCTErLdC9axq2UGvzHf6NXmuEz9YIgMC8xkQgu6OwbIqGomSTM5dLRu2zUfQ/exec";

  const form = document.getElementById("rsvpForm");
  const msg = document.getElementById("msg");
  const list = document.getElementById("ucapanList");

  // ===== SUBMIT FORM =====
  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const nama = document.getElementById("nama").value.trim();
    const bilangan = document.getElementById("bilangan").value.trim();
    const ucapan = document.getElementById("ucapan").value.trim() || "-";

    console.log("Submitting data:", { nama, bilangan, ucapan });

    // Validation
    if (!nama || !bilangan) {
      alert("Sila isi Nama dan Bilangan sebelum hantar!");
      return;
    }

    try {
      const res = await fetch(scriptURL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ nama, bilangan, ucapan }),
      });

      const result = await res.json();
      console.log("Response:", result);

      if (result.result === "success") {
        msg.classList.remove("hidden");
        form.reset();
        loadUcapan(); // refresh ucapan list
        setTimeout(() => msg.classList.add("hidden"), 3000);
      } else {
        alert("Gagal hantar data ke server!");
        console.error("Server response:", result);
      }
    } catch (err) {
      console.error("Fetch error:", err);
      alert("Ralat semasa menghantar data. Sila semak console log.");
    }
  });

  // ===== LOAD UCAPAN DARI SHEET =====
  async function loadUcapan() {
    try {
      const res = await fetch(scriptURL);
      const data = await res.json();
      console.log("Fetched ucapan:", data);

      list.innerHTML = data.length
        ? data.map(r => `
          <div class="border-b border-gray-200 pb-2">
            <p class="italic">"${r.ucapan}"</p>
            <p class="font-semibold mt-1 text-sm">‚Äî ${r.nama}</p>
          </div>`).join("")
        : "<p>Tiada ucapan lagi.</p>";
    } catch (err) {
      console.error("Error load ucapan:", err);
      list.innerHTML = "<p>Gagal memuatkan ucapan. Semak console log.</p>";
    }
  }

  window.addEventListener("load", loadUcapan);
</script>


</body>
</html>
